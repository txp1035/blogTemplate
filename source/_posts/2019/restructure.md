---
title: '记一次项目重构'
category: 技术
tags: [笔记, 前端]
date: 2019-5-9
---

代码惨不忍睹...

<!-- more -->

## 背景

1、一个临时赶出来的项目。
2、在都不熟悉 ant design pro 的情况下，甚至有的同学还不熟悉 react，大概经手 5 个同学一起写出来的项目。
3、没有做规划直接开始写代码。
4、为了方便快捷直接去除了 ant design pro 代码检查。

## 问题

1、由于是并行开发，分工是按照模块来分的，导致前面几个模块和后面几个模块相同功能的组件会写成两份（最常见的是表格组件），当需求有修改的同时不方便统一做修改。
2、代码格式没有限制，风格各异，会出现一些莫名其妙的错误，阅读成本高。
3、没有约定全局样式、全局变量（版本号等）导致修改成本很高。
4、权限设计过于简单，只适用于菜单。
5、Tab 切换设计错误，导致从列表页到详情页后返回不能是刚才的 tab。（这里应该设计成路由）
6、组件中夹杂着数据处理，逻辑不明确，导致修改成本高。

## 目的

1、解决项目代码格式不规范问题。（需要 eslint、stylelint 工具规范检查、git 提交前验证）
2、解决项目组件使用不统一问题。（同一功能组件存在两个人写的）
3、解决权限管理问题（目前是菜单权限，需要控制到按钮权限）
4、解决埋点问题
5、优化：使用 ts 来写，利用 d.ts 来优化开发体验，提示语等。
6、解决 tab 路由问题
7、解决 ui 组件和逻辑分离问题 1、解决项目代码格式不规范问题。（需要 eslint、stylelint 工具规范检查、git 提交前验证）
2、解决项目组件使用不统一问题。（同一功能组件存在两个人写的）
3、解决权限管理问题（目前是菜单权限，需要控制到按钮权限）
4、解决埋点问题
5、优化：使用 ts 来写，利用 d.ts 来优化开发体验，提示语等。
6、解决 tab 路由问题
7、解决 ui 组件和逻辑分离问题

## 流程：

1、搭项目：基于 umi，使用 eslint、stylelint、tslint 检查，pretter 格式化，使用 ts 开发，支持 mock 数据

## 解决方案

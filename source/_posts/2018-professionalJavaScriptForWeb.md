---
title: "JavaScript高级程序设计总结"
category: 技术
tags: 前端
date: 2018-07-27
---

## JavaScript 组成

JavaScript 是一种专为与网页交互而设计的脚本语言，由下列三个不同的部分组成：  
1、ECMAScript，由 ECMA-262 定义，提供核心语言功能（语法、类型、语句、关键字、保留字、操作符、对象）；  
2、文档对象模型（DOM），提供访问和操作网页内容的方法和接口；  
3、浏览器对象模型（BOM），提供与浏览器交互的方法和接口。

## 在 HTML 中使用 JavaScript

把 JavaScript 插入到 HTML 页面中要使用\<script\>元素。使用这个元素可以把 JavaScript 嵌入到 HTML 页面中，让脚本与标记混合在一起；也可以包含外部的 JavaScript 文件。  
在包含外部 JavaScript 文件时，必须将 src 属性设置为指向相应文件的 URL。而这个文件既可以是与包含它的页面位于同一个服务器上的文件，也可以是其他任何域中的文件。  
所有\<script\>元素都会按照它们在页面中出现的先后顺序依次被解析。在不使用 defer 和 async 属性的情况下，只有在解析完前面\<script\>元素中的代码之后，才会开始解析后面\<script\>元素中的代码。  
由于浏览器会先解析完不使用 defer 属性的\<script\>元素中的代码，然后再解析后面的内容，所以一般应该把\<script\>元素放在页面最后，即主要内容后面，</body>标签前面。  
使用 defer 属性可以让脚本在文档完全呈现之后再执行。延迟脚本总是按照指定它们的顺序执行。  
使用 async 属性可以表示当前脚本不必等待其他脚本，也不必阻塞文档呈现。不能保证异步脚本按照它们在页面中出现的顺序执行。

## 基本概念

ECMAScript 中的基本数据类型包括 Undefined、Null、Boolean、Number 和 String。  
与其他语言不同，ECMScript 没有为整数和浮点数值分别定义不同的数据类型，Number 类型可用于表示所有数值。  
ECMAScript 中也有一种复杂的数据类型，即 Object 类型，该类型是这门语言中所有对象的基础类型。  
严格模式为这门语言中容易出错的地方施加了限制。  
ECMAScript 提供了很多与 C 及其他类 C 语言中相同的基本操作符，包括算术操作符、布尔操作符、关系操作符、相等操作符及赋值操作符等。  
ECMAScript 从其他语言中借鉴了很多流控制语句，例如 if 语句、for 语句和 switch 语句等。ECMAScript 中的函数与其他语言中的函数有诸多不同之处。  
无须指定函数的返回值，因为任何 ECMAScript 函数都可以在任何时候返回任何值。  
实际上，未指定返回值的函数返回的是一个特殊的 undefined 值。  
ECMAScript 中也没有函数签名的概念，因为其函数参数是以一个包含零或多个值的数组的形式传递的。  
可以向 ECMAScript 函数传递任意数量的参数，并且可以通过 arguments 对象来访问这些参数。  
由于不存在函数签名的特性，ECMAScript 函数不能重载。

## 变量、作用域和内存问题

JavaScript 变量可以用来保存两种类型的值：基本类型值和引用类型值。基本类型的值源自以下 5 种基本数据类型：Undefined、Null、Boolean、Number 和 String。基本类型值和引用类型值具有以下特点：  
基本类型值在内存中占据固定大小的空间，因此被保存在栈内存中；  
从一个变量向另一个变量复制基本类型的值，会创建这个值的一个副本；  
引用类型的值是对象，保存在堆内存中；  
包含引用类型值的变量实际上包含的并不是对象本身，而是一个指向该对象的指针；  
从一个变量向另一个变量复制引用类型的值，复制的其实是指针，因此两个变量最终都指向同一个对象；  
确定一个值是哪种基本类型可以使用 typeof 操作符，而确定一个值是哪种引用类型可以使用 instanceof 操作符。  
所有变量（包括基本类型和引用类型）都存在于一个执行环境（也称为作用域）当中，这个执行环境决定了变量的生命周期，以及哪一部分代码可以访问其中的变量。以下是关于执行环境的几点总结：  
执行环境有全局执行环境（也称为全局环境）和函数执行环境之分；  
每次进入一个新执行环境，都会创建一个用于搜索变量和函数的作用域链；  
函数的局部环境不仅有权访问函数作用域中的变量，而且有权访问其包含（父）环境，乃至全局环境；  
全局环境只能访问在全局环境中定义的变量和函数，而不能直接访问局部环境中的任何数据；  
变量的执行环境有助于确定应该何时释放内存。  
JavaScript 是一门具有自动垃圾收集机制的编程语言，开发人员不必关心内存分配和回收问题。可以对 JavaScript 的垃圾收集例程作如下总结。  
离开作用域的值将被自动标记为可以回收，因此将在垃圾收集期间被删除。  
“标记清除”是目前主流的垃圾收集算法，这种算法的思想是给当前不使用的值加上标记，然后再回收其内存。  
另一种垃圾收集算法是“引用计数”，这种算法的思想是跟踪记录所有值被引用的次数。JavaScript 引擎目前都不再使用这种算法；但在 IE 中访问非原生 JavaScript 对象（如 DOM 元素）时，这种算法仍然可能会导致问题。  
当代码中存在循环引用现象时，“引用计数”算法就会导致问题。
解除变量的引用不仅有助于消除循环引用现象，而且对垃圾收集也有好处。为了确保有效地回收内存，应该及时解除不再使用的全局对象、全局对象属性以及循环引用变量的引用。

## 引用类型

### Object

#### 引用类型通用属性：

constructor：返回对创建此对象的数组函数的引用。  
prototype：使您有能力向对象添加属性和方法。

#### 引用类型通用方法：

toString()：把数组转换为字符串，并返回结果。  
toLocaleString()：把数组转换为本地数组，并返回结果。  
valueOf()：返回数组对象的原始值。

### Array

#### 属性：

length：设置或返回数组中元素的数目。

#### 方法：

检测数组  
isArray()：  
转换方法  
join()：把数组的所有元素放入一个字符串。元素通过指定的分隔符进行分隔。  
栈方法  
pop()：删除并返回数组的最后一个元素。  
push()：向数组的末尾添加一个或更多元素，并返回新的长度。  
队列方法  
shift()：删除并返回数组的第一个元素。  
unshift()：向数组的开头添加一个或更多元素，并返回新的长度。  
重排序方法  
sort()：对数组的元素进行排序。  
reverse()：颠倒数组中元素的顺序。  
操作方法  
concat()：连接两个或更多的数组，并返回结果。  
slice()：从某个已有的数组返回选定的元素。  
splice()：删除元素，并向数组添加新元素。  
位置方法  
indexOf()：
lastIndexOf()：  
迭代方法  
every()：对数组中的每一项运行给定函数，如果该函数对每一项都返回 true，则返回 true。  
filter()：对数组中的每一项运行给定函数，返回该函数会返回 true 的项组成的数组。  
forEach()：对数组中的每一项运行给定函数。这个方法没有返回值。  
map()：对数组中的每一项运行给定函数，返回每次函数调用的结果组成的数组。  
some()：对数组中的每一项运行给定函数，如果该函数对任一项返回 true，则返回 true。  
归并方法  
reduce()：  
reduceRight()：

### Date

#### 方法

日期格式化方法  
toDateString()：以特定于实现的格式显示星期几、月、日和年；  
toTimeString()：以特定于实现的格式显示时、分、秒和时区；  
toLocaleDateString()：以特定于地区的格式显示星期几、月、日和年；  
toLocaleTimeString()：以特定于实现的格式显示时、分、秒；  
toUTCString()：以特定于实现的格式完整的 UTC 日期。
日期/时间组件方法  
getTime()：返回表示日期的毫秒数；与 valueOf()方法返回的值相同。  
setTime(毫秒)：以毫秒数设置日期，会改变整个日期。  
getFullYear()：取得 4 位数的年份（如 2007 而非仅 07）。  
getUTCFullYear()：返回 UTC 日期的 4 位数年份。  
setFullYear(年)：设置日期的年份。传入的年份值必须是 4 位数字（如 2007 而非仅 07）。  
setUTCFullYear(年)：设置 UTC 日期的年份。传入的年份值必须是 4 位数字（如 2007 而非仅 07）。  
getMonth()：返回日期中的月份，其中 0 表示一月，11 表示十二月。  
getUTCMonth()：返回 UTC 日期中的月份，其中 0 表示一月，11 表示十二月。  
setMonth(月)：设置日期的月份。传入的月份值必须大于 0，超过 11 则增加年份。  
setUTCMonth(月)：设置 UTC 日期的月份。传入的月份值必须大于 0，超过 11 则增加年份。  
getDate()：返回日期月份中的天数（1 到 31）。  
getUTCDate()：返回 UTC 日期月份中的天数（1 到 31）。  
setDate(日)：设置日期月份中的天数。如果传入的值超过了该月中应有的天数，则增加月份。  
setUTCDate(日)：设置 UTC 日期月份中的天数。如果传入的值超过了该月中应有的天数，则增加月份。  
getDay()：返回日期中星期的星期几（其中 0 表示星期日，6 表示星期六）。  
getUTCDay()：返回 UTC 日期中星期的星期几（其中 0 表示星期日，6 表示星期六）。  
getHours()：返回日期中的小时数（0 到 23）。  
getUTCHours()：返回 UTC 日期中的小时数（0 到 23）。  
setHours(时)：设置日期中的小时数。传入的值超过了 23 则增加月份中的天数。  
setUTCHours(时)：设置 UTC 日期中的小时数。传入的值超过了 23 则增加月份中的天数。  
getMinutes()：返回日期中的分钟数（0 到 59）。  
getUTCMinutes()：返回 UTC 日期中的分钟数（0 到 59）。  
setMinutes(分)：设置日期中的分钟数。传入的值超过 59 则增加小时数。  
setUTCMinutes(分)：设置 UTC 日期中的分钟数。传入的值超过 59 则增加小时数。  
getSeconds()：返回日期中的秒数（0 到 59）。  
getUTCSeconds()：返回 UTC 日期中的秒数（0 到 59）。  
setSeconds(秒)：设置日期中的秒数。传入的值超过了 59 会增加分钟数。  
setUTCSeconds(秒)：设置 UTC 日期中的秒数。传入的值超过了 59 会增加分钟数。  
getMilliseconds()：返回日期中的毫秒数。  
getUTCMilliseconds()：返回 UTC 日期中的毫秒数。  
setMilliseconds(毫秒)：设置日期中的毫秒数。  
setUTCMilliseconds(毫秒)：设置 UTC 日期中的毫秒数  
getTimezoneOffset()：返回本地时间与 UTC 时间相差的分钟数。例如，美国东部标准时间返回 300。在某地进入夏令时的情况下，这个值会有所变化

### RegExp

修饰符
i：执行对大小写不敏感的匹配。  
g：执行全局匹配（查找所有匹配而非在找到第一个匹配后停止）。  
m：执行多行匹配。  
RegExp 构造函数属性  
input($\_):最近一次要匹配的字符串。Opera 未实现此属性。  
lastMatch($&):最近一次的匹配项。Opera 未实现此属性。  
lastParen($+):最近一次匹配的捕获组。Opera 未实现此属性。  
leftContext($):input 字符串中 lastMatch 之前的文本。  
multiline($\*):布尔值，表示是否所有表达式都使用多行模式。IE 和 Opera 未实现此属性。  
rightContext($'):Input 字符串中 lastMatch 之后的文本。

#### 属性

global：布尔值，表示是否设置了 g 标志。  
ignoreCase：布尔值，表示是否设置了 i 标志。  
lastIndex：整数，表示开始搜索下一个匹配项的字符位置，从 0 算起。  
multiline：布尔值，表示是否设置了 m 标志。  
source：正则表达式的字符串表示，按照字面量形式而非传入构造函数中的字符串模式返回。

#### 方法

exec()：检索字符串中指定的值。返回找到的值，并确定其位置。  
test()：检索字符串中指定的值。返回 true 或 false。

### Function

#### 属性

#### 方法

### 基本包装类型

#### 属性

#### 方法

### 单体内置对象

#### 属性

#### 方法
